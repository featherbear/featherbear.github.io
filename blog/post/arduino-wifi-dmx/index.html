<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Arduino - WiFi DMX &middot; Andrew&#39;s Blog</title><meta name=description content="DMX via ArtNet, via WiFi, via Arduino!"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-107434487-3','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css><link href=/blog/assets/prism.js/prism.css rel=stylesheet><script defer src=/blog/assets/prism.js/prism.js onload="let path;Prism.plugins.autoloader.languages_path=((path=this.getAttribute('src')).substring(0,path.lastIndexOf('/')))+'/languages/'"></script><script defer src=https://use.fontawesome.com/releases/v5.3.1/js/all.js></script><link rel=stylesheet href=/blog/css/site.css><style>body{background-image:url(/blog/IMG_0072.jpg)}</style><script defer src=/blog/js/site.js></script></head><body class=has-navbar-fixed-top><nav class="navbar is-fixed-top is-unselectable" role=navigation aria-label="main navigation"><div class=container><div class=navbar-brand><a class="navbar-item has-text-grey-darker is-size-3" href=http://featherbear.github.io/blog/>andrew wong</a>
<a role=button class="navbar-burger burger" aria-label=menu aria-expanded=false data-target=navmenu><span aria-hidden=true></span><span aria-hidden=true></span><span aria-hidden=true></span></a></div><div id=navmenu class=navbar-menu><div class=navbar-end><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link has-text-black-ter is-arrowless" href=http://featherbear.github.io/blog/>blog</a><div class=navbar-dropdown><a href=/blog/categories/ai class=navbar-item>ai</a><a href=/blog/categories/audio-visual class=navbar-item>audio-visual</a><a href=/blog/categories/life class=navbar-item>life</a><a href=/blog/categories/networking class=navbar-item>networking</a><a href=/blog/categories/photography class=navbar-item>photography</a><a href=/blog/categories/programming class=navbar-item>programming</a><a href=/blog/categories/python class=navbar-item>python</a><a href=/blog/categories/unsw class=navbar-item>unsw</a><a href=/blog/categories/webdev class=navbar-item>webdev</a></div></div><a class="navbar-item has-text-grey" href=/about>about me</a>
<a class="navbar-item has-text-grey" href=/photos>photography</a>
<a class="navbar-item has-text-grey" href=/programming>programming</a></div></div></div></nav><main class=container><header class="hero is-info"><div class=hero-body><div class=container><h1 class=title>Arduino - WiFi DMX</h1><h2 class=subtitle>Posted <time datetime=2019-04-20>Apr 20, 2019</time></h2></div></div></header><article id=content><p>At the start of 2018, I built a cheap wireless DMX receiver as a parting &lsquo;gift&rsquo; to my high school (Heck, I even wrote a <a href=https://sydneytech.github.io/sal/>training manual</a>).<br>Their system had <strong>i s s u e s</strong>.</p><p>Two broken lighting consoles, and the DMX cable that connects from the control room was damaged due to water damage.<br>So something had to be done!</p><p><style>img{max-height:50vh}</style><img src=PHOTO_20180124_113134.jpg alt></p><p><video autoplay loop muted src=VIDEO_20170207_144659-1-1.mp4 style=max-height:50vh>
I threw together an ESP8266 NodeMCU V3, a MAX485 chip, and added a barrel type DC socket</p><hr><p>Fast forward to 2019, it was time to remake it - saying as I was needing to wireless control some DMX fixtures<br><img src=USER_SCOPED_TEMP_DATA_MSGR_PHOTO_FOR_UPLOAD_1554983905342.jpg_1554983906885.jpeg alt></p><hr><p>Using the <a href=https://github.com/claudeheintz/LXDMXWiFi_Library>LXDMXWiFi_Library</a> by Claude Heintz</p><pre><code class=language-arduino>/*
  Attach (ESP8266) D4 to (RS485) DI
  Attach VCC to 3V3
  Attach GNDs together

  Supposedly meant to short DE and RE to VCC

  1B
  2G
  3A

  D4 is the DMX out
*/


///

static const uint8_t ACTIVITY_INDICATOR_PIN = D0;
static const char *SSID = &quot;&lt; YOUR WIFI SSID &gt;&quot;;
static const char *PASS = &quot;&lt; YOUR WIFI PASS &gt;&quot;;

static const int subnet = 0;
static const int universe = 0;

static char* name = &quot;ESP8266 Receiver&quot;;
// &quot;ESP8266 ArtNet to DMX Receiver&quot;

///

#include &lt;LXESP8266UARTDMX.h&gt;
#include &lt;ESP8266WiFi.h&gt;
#include &lt;WiFiUdp.h&gt;
#include &lt;LXDMXWiFi.h&gt;
#include &lt;LXWiFiArtNet.h&gt;

LXDMXWiFi* interface;
WiFiUDP wUDP;

uint8_t led_state_activity = 0;
void blinkActivity() {
  digitalWrite(ACTIVITY_INDICATOR_PIN, !(led_state_activity = !led_state_activity) ? HIGH : LOW);
}

void setup() {
  Serial.begin(115200);
  Serial.println(&quot;Starting WiFi to DMX bridge&quot;);

  pinMode(ACTIVITY_INDICATOR_PIN, OUTPUT);

  ESP8266DMX.startOutput();

  WiFi.mode(WIFI_STA);
  WiFi.begin(SSID, PASS);

  Serial.print(&quot;Connecting to wireless network: &quot;);
  Serial.println(SSID);
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    blinkActivity();
  }
  Serial.print(&quot;Connected with IP: &quot;);
  Serial.print(WiFi.localIP());

  interface = new LXWiFiArtNet(WiFi.localIP(), WiFi.subnetMask());
  ((LXWiFiArtNet*)interface)-&gt;setSubnetUniverse(subnet, universe); // 0 based! So subnet 1 (which is 0,), and universe 4
  strcpy(((LXWiFiArtNet*)interface)-&gt;shortName(), name);
  strcpy(((LXWiFiArtNet*)interface)-&gt;longName(), name);

  wUDP.begin(interface-&gt;dmxPort());

  ((LXWiFiArtNet*)interface)-&gt;send_art_poll_reply(&amp;wUDP);

  digitalWrite(ACTIVITY_INDICATOR_PIN, HIGH);
  led_state_activity = 0;
}


void loop() {
  if ( interface-&gt;readDMXPacket(&amp;wUDP) ) {
    Serial.print(&quot;data&quot;);
    for (int i = 1; i &lt;= interface-&gt;numberOfSlots(); i++) {
      ESP8266DMX.setSlot(i , interface-&gt;getSlot(i));
    }
    blinkActivity();
  }
}

</code></pre></article></main><div class=container><h1 class="title has-text-grey-lighter">More posts</h1><div class=listArticle><a href=http://featherbear.github.io/blog/post/so-you-want-to-be-a-python-expert-pydata-seattle-2017/><article class=media><div class=media-content><h2 class="title is-marginless">So You Want to Be a Python Expert? | PyData Seattle 2017</h2><div class=level><div class=level-left><p class=subtitle>Things you should know as as a Python expert</p></div><div class=level-right><p>Posted <time datetime=2019-04-24>Apr 24, 2019</time></p></div></div></div></article><div class="is-unselectable categories"><a href=/blog/categories/programming><span class="tag is-info">#Programming</span></a></div></a></div><div class=listArticle><a href=http://featherbear.github.io/blog/post/lampwin-moving-heads/><article class=media><figure class=media-left><p class="image is-128x128"><img src=https://i.ebayimg.com/images/g/8CIAAOSwceZcmIPM/s-l500.jpg></p></figure><div class=media-content><h2 class="title is-marginless">Lampwin Moving Heads</h2><div class=level><div class=level-left><p class=subtitle>Musing at an el&#39; cheapo DMX moving head</p></div><div class=level-right><p>Posted <time datetime=2019-04-20>Apr 20, 2019</time></p></div></div></div></article><div class="is-unselectable categories"><a href=/blog/categories/audio-visual><span class="tag is-info">#Audio Visual</span></a>
<a href=/blog/categories/programming><span class="tag is-info">#Programming</span></a></div></a></div></div><div id=scroll-nav></div><footer class=footer><nav class="breadcrumb is-right" aria-label=breadcrumbs><ul><li><a href=../../>blog</a></li><li><a href=../>post</a></li><li class=is-active><a href=# aria-current=page>arduino-wifi-dmx</a></li></ul></nav><hr><figure class="image is-128x128 logo" style="margin:0 auto"><img src=/blog/logo.png></figure></footer><link rel=stylesheet href=/blog/assets/luminous.js/luminous-basic.min.css><script src=/blog/assets/luminous.js/Luminous.min.js></script><script type=text/javascript>document.querySelectorAll("#content img").forEach(e=>new Luminous(e,{sourceAttribute:"src"}))</script><script src=/blog/assets/elevator.js/elevator.min.js></script><script type=text/javascript>var elevator=new Elevator({element:document.querySelector(".footer .logo"),mainAudio:'\/blog\/assets\/elevator.js\/elevator.mp3',endAudio:'\/blog\/assets\/elevator.js\/ding.mp3'});</script><script>{let max=document.body.scrollHeight-window.innerHeight;window.addEventListener('scroll',function(){document.getElementById('scroll-nav').style.width=`${this.scrollY/max*100}%`});document.getElementById('scroll-nav').style.width=`${window.scrollY/max*100}%`}</script></body></html>